# Utilizza l'immagine ufficiale di Alpine
FROM ubuntu:latest

# Installa il pacchetti necessari
RUN apt-get update && \
    apt-get install -y \
    suricata \
    # Non essenziali
    jq \
    tcpdump \
    vim

# Copia lo script di configurazione dell ids nel container
COPY script/ids-entrypoint.sh /usr/local/bin/

# Copia le regole di suricata
COPY suricata.rules /var/lib/suricata/rules/suricata.rules

# Rende eseguibile lo script
RUN chmod +x /usr/local/bin/ids-entrypoint.sh

# Esegui lo script all'avvio
ENTRYPOINT ["/usr/local/bin/ids-entrypoint.sh"]
CMD ["sleep", "infinity"]